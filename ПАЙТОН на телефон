import tkinter as tk
from tkinter import ttk, messagebox
import math
import re

class SmartSolverApp:
    def __init__(self, root):
        self.root = root
        self.root.title("üßÆ –£–º–Ω—ã–π –†–µ—à–∞—Ç–µ–ª—å - Python –≤–µ—Ä—Å–∏—è")
        self.root.geometry("400x600")
        self.root.configure(bg='#f0f0f0')
        
        # –°—Ç–∏–ª–∏
        self.style = ttk.Style()
        self.style.configure('TButton', font=('Arial', 12), padding=10)
        self.style.configure('TLabel', font=('Arial', 12), background='#f0f0f0')
        
        self.create_gui()
    
    def create_gui(self):
        # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        main_frame = ttk.Frame(self.root, padding="20")
        main_frame.pack(fill=tk.BOTH, expand=True)
        
        # –ó–∞–≥–æ–ª–æ–≤–æ–∫
        title_label = ttk.Label(main_frame, 
                               text="üßÆ –£–º–Ω—ã–π –†–µ—à–∞—Ç–µ–ª—å", 
                               font=('Arial', 20, 'bold'),
                               foreground='#2c3e50')
        title_label.pack(pady=10)
        
        subtitle_label = ttk.Label(main_frame, 
                                  text="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ ‚Ä¢ –§–∏–∑–∏–∫–∞ ‚Ä¢ –ì–µ–æ–º–µ—Ç—Ä–∏—è ‚Ä¢ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞",
                                  font=('Arial', 12),
                                  foreground='#7f8c8d')
        subtitle_label.pack(pady=5)
        
        # –ü–æ–ª–µ –≤–≤–æ–¥–∞
        input_frame = ttk.Frame(main_frame)
        input_frame.pack(fill=tk.X, pady=10)
        
        ttk.Label(input_frame, text="–í–≤–µ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ:").pack(anchor='w')
        self.entry = ttk.Entry(input_frame, font=('Arial', 14))
        self.entry.pack(fill=tk.X, pady=5)
        self.entry.bind('<Return>', lambda e: self.calculate())
        
        # –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –≤–≤–æ–¥–∞
        quick_buttons_frame = ttk.Frame(main_frame)
        quick_buttons_frame.pack(fill=tk.X, pady=5)
        
        quick_buttons = [
            '7', '8', '9', '+',
            '4', '5', '6', '-', 
            '1', '2', '3', '*',
            '0', '.', '(', ')'
        ]
        
        for i, btn in enumerate(quick_buttons):
            row = i // 4
            col = i % 4
            ttk.Button(quick_buttons_frame, text=btn, 
                      command=lambda b=btn: self.entry.insert(tk.END, b),
                      width=4).grid(row=row, column=col, padx=2, pady=2)
        
        # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π
        functions_frame = ttk.LabelFrame(main_frame, text="–§—É–Ω–∫—Ü–∏–∏", padding=10)
        functions_frame.pack(fill=tk.BOTH, expand=True, pady=10)
        
        # –°–µ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π
        functions = [
            ("üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", self.show_math),
            ("‚ö° –§–∏–∑–∏–∫–∞", self.show_physics),
            ("üìê –ì–µ–æ–º–µ—Ç—Ä–∏—è", self.show_geometry),
            ("üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞", self.show_computer_science),
            ("üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä", self.show_converter),
            ("üì∏ –§–æ—Ç–æ-–∞–Ω–∞–ª–∏–∑", self.show_photo_analysis)
        ]
        
        for i, (text, command) in enumerate(functions):
            btn = ttk.Button(functions_frame, text=text, command=command)
            btn.grid(row=i//2, column=i%2, sticky='ew', padx=5, pady=5)
            functions_frame.columnconfigure(i%2, weight=1)
        
        # –ö–Ω–æ–ø–∫–∞ —Ä–∞—Å—á–µ—Ç–∞
        ttk.Button(main_frame, text="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å", 
                  command=self.calculate, 
                  style='Accent.TButton').pack(fill=tk.X, pady=10)
        
        # –û–±–ª–∞—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        result_frame = ttk.LabelFrame(main_frame, text="–†–µ–∑—É–ª—å—Ç–∞—Ç", padding=10)
        result_frame.pack(fill=tk.BOTH, expand=True)
        
        self.result_text = tk.Text(result_frame, height=8, font=('Arial', 11),
                                  wrap=tk.WORD, bg='#f8f9fa', relief='flat')
        scrollbar = ttk.Scrollbar(result_frame, orient='vertical', 
                                 command=self.result_text.yview)
        self.result_text.configure(yscrollcommand=scrollbar.set)
        
        self.result_text.pack(side=tk.LEFT, fill=tk.BOTH, expand=True)
        scrollbar.pack(side=tk.RIGHT, fill=tk.Y)
    
    def calculate(self):
        expression = self.entry.get().strip()
        if not expression:
            messagebox.showwarning("–í–Ω–∏–º–∞–Ω–∏–µ", "–í–≤–µ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞")
            return
        
        try:
            # –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
            result = self.safe_eval(expression)
            steps = f"–í—ã—Ä–∞–∂–µ–Ω–∏–µ: {expression}\n"
            steps += f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {result}\n\n"
            steps += f"–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ:\n"
            steps += f"{expression} = {result}"
            
            self.show_result(steps)
            
        except Exception as e:
            messagebox.showerror("–û—à–∏–±–∫–∞", f"–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã—á–∏—Å–ª–∏—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: {str(e)}")
    
    def safe_eval(self, expression):
        """–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π"""
        # –ó–∞–º–µ–Ω–∞ —Å–∏–º–≤–æ–ª–æ–≤
        expression = expression.replace('¬≤', '**2').replace('¬≥', '**3')
        expression = expression.replace('^', '**')
        
        # –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
        allowed_names = {
            'sin': math.sin, 'cos': math.cos, 'tan': math.tan,
            'sqrt': math.sqrt, 'log': math.log, 'log10': math.log10,
            'exp': math.exp, 'pi': math.pi, 'e': math.e,
            'abs': abs, 'round': round
        }
        
        # –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è
        code = compile(expression, '<string>', 'eval')
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∏–º–µ–Ω
        for name in code.co_names:
            if name not in allowed_names:
                raise ValueError(f"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ '{name}' –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ")
        
        return eval(code, {"__builtins__": {}}, allowed_names)
    
    def show_math(self):
        math_window = tk.Toplevel(self.root)
        math_window.title("üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è")
        math_window.geometry("400x300")
        
        ttk.Label(math_window, text="–ü—Ä–∏–º–µ—Ä—ã –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π:", 
                 font=('Arial', 12, 'bold')).pack(pady=10)
        
        examples = [
            "2 + 3 * 4",
            "sin(pi/2)",
            "sqrt(16)",
            "2**3 + 4",
            "(5 + 3) * 2"
        ]
        
        for example in examples:
            frame = ttk.Frame(math_window)
            frame.pack(fill=tk.X, padx=20, pady=5)
            ttk.Label(frame, text=example, width=20).pack(side=tk.LEFT)
            ttk.Button(frame, text="–í—Å—Ç–∞–≤–∏—Ç—å", 
                      command=lambda e=example: self.insert_example(e)).pack(side=tk.RIGHT)
    
    def show_physics(self):
        physics_window = tk.Toplevel(self.root)
        physics_window.title("‚ö° –§–∏–∑–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã")
        physics_window.geometry("400x400")
        
        notebook = ttk.Notebook(physics_window)
        notebook.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)
        
        # –ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è
        kinetic_frame = ttk.Frame(notebook)
        notebook.add(kinetic_frame, text="–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è")
        
        ttk.Label(kinetic_frame, text="E = ¬Ωmv¬≤").pack(pady=10)
        
        ttk.Label(kinetic_frame, text="–ú–∞—Å—Å–∞ (–∫–≥):").pack()
        mass_entry = ttk.Entry(kinetic_frame)
        mass_entry.pack(pady=5)
        
        ttk.Label(kinetic_frame, text="–°–∫–æ—Ä–æ—Å—Ç—å (–º/—Å):").pack()
        velocity_entry = ttk.Entry(kinetic_frame)
        velocity_entry.pack(pady=5)
        
        def calc_kinetic():
            try:
                m = float(mass_entry.get())
                v = float(velocity_entry.get())
                result = 0.5 * m * v**2
                messagebox.showinfo("–†–µ–∑—É–ª—å—Ç–∞—Ç", f"–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è: {result:.2f} –î–∂")
            except ValueError:
                messagebox.showerror("–û—à–∏–±–∫–∞", "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —á–∏—Å–ª–∞")
        
        ttk.Button(kinetic_frame, text="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å", 
                  command=calc_kinetic).pack(pady=10)
        
        # –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è
        potential_frame = ttk.Frame(notebook)
        notebook.add(potential_frame, text="–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è")
        
        ttk.Label(potential_frame, text="E = mgh").pack(pady=10)
        
        ttk.Label(potential_frame, text="–ú–∞—Å—Å–∞ (–∫–≥):").pack()
        mass_p_entry = ttk.Entry(potential_frame)
        mass_p_entry.pack(pady=5)
        
        ttk.Label(potential_frame, text="–í—ã—Å–æ—Ç–∞ (–º):").pack()
        height_entry = ttk.Entry(potential_frame)
        height_entry.pack(pady=5)
        
        def calc_potential():
            try:
                m = float(mass_p_entry.get())
                h = float(height_entry.get())
                g = 9.81
                result = m * g * h
                messagebox.showinfo("–†–µ–∑—É–ª—å—Ç–∞—Ç", f"–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è: {result:.2f} –î–∂")
            except ValueError:
                messagebox.showerror("–û—à–∏–±–∫–∞", "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —á–∏—Å–ª–∞")
        
        ttk.Button(potential_frame, text="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å", 
                  command=calc_potential).pack(pady=10)
    
    def show_geometry(self):
        geometry_window = tk.Toplevel(self.root)
        geometry_window.title("üìê –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã")
        geometry_window.geometry("400x400")
        
        notebook = ttk.Notebook(geometry_window)
        notebook.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)
        
        # –¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫
        triangle_frame = ttk.Frame(notebook)
        notebook.add(triangle_frame, text="–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫")
        
        ttk.Label(triangle_frame, text="S = ¬Ω √ó a √ó h").pack(pady=10)
        
        ttk.Label(triangle_frame, text="–û—Å–Ω–æ–≤–∞–Ω–∏–µ:").pack()
        base_entry = ttk.Entry(triangle_frame)
        base_entry.pack(pady=5)
        
        ttk.Label(triangle_frame, text="–í—ã—Å–æ—Ç–∞:").pack()
        height_entry = ttk.Entry(triangle_frame)
        height_entry.pack(pady=5)
        
        def calc_triangle():
            try:
                a = float(base_entry.get())
                h = float(height_entry.get())
                result = 0.5 * a * h
                messagebox.showinfo("–†–µ–∑—É–ª—å—Ç–∞—Ç", f"–ü–ª–æ—â–∞–¥—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞: {result:.2f}")
            except ValueError:
                messagebox.showerror("–û—à–∏–±–∫–∞", "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —á–∏—Å–ª–∞")
        
        ttk.Button(triangle_frame, text="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å", 
                  command=calc_triangle).pack(pady=10)
        
        # –ö—Ä—É–≥
        circle_frame = ttk.Frame(notebook)
        notebook.add(circle_frame, text="–ö—Ä—É–≥")
        
        ttk.Label(circle_frame, text="S = œÄr¬≤").pack(pady=10)
        
        ttk.Label(circle_frame, text="–†–∞–¥–∏—É—Å:").pack()
        radius_entry = ttk.Entry(circle_frame)
        radius_entry.pack(pady=5)
        
        def calc_circle():
            try:
                r = float(radius_entry.get())
                area = math.pi * r**2
                circumference = 2 * math.pi * r
                result = f"–ü–ª–æ—â–∞–¥—å: {area:.2f}\n–î–ª–∏–Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏: {circumference:.2f}"
                messagebox.showinfo("–†–µ–∑—É–ª—å—Ç–∞—Ç", result)
            except ValueError:
                messagebox.showerror("–û—à–∏–±–∫–∞", "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ")
        
        ttk.Button(circle_frame, text="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å", 
                  command=calc_circle).pack(pady=10)
    
    def show_computer_science(self):
        cs_window = tk.Toplevel(self.root)
        cs_window.title("üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞")
        cs_window.geometry("500x400")
        
        notebook = ttk.Notebook(cs_window)
        notebook.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)
        
        # –î–≤–æ–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
        binary_frame = ttk.Frame(notebook)
        notebook.add(binary_frame, text="–î–≤–æ–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞")
        
        ttk.Label(binary_frame, text="–ü–µ—Ä–µ–≤–æ–¥ –≤ –¥–≤–æ–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É:").pack(pady=10)
        
        ttk.Label(binary_frame, text="–î–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ:").pack()
        decimal_entry = ttk.Entry(binary_frame)
        decimal_entry.pack(pady=5)
        
        result_label = ttk.Label(binary_frame, text="", background='white', 
                                relief='sunken', padding=5)
        result_label.pack(fill=tk.X, padx=20, pady=10)
        
        def convert_to_binary():
            try:
                decimal = int(decimal_entry.get())
                binary = bin(decimal)[2:]
                result_label.config(text=f"–î–µ—Å—è—Ç–∏—á–Ω–æ–µ: {decimal}\n–î–≤–æ–∏—á–Ω–æ–µ: {binary}")
            except ValueError:
                messagebox.showerror("–û—à–∏–±–∫–∞", "–í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ")
        
        ttk.Button(binary_frame, text="–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å", 
                  command=convert_to_binary).pack(pady=5)
        
        # –®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
        hex_frame = ttk.Frame(notebook)
        notebook.add(hex_frame, text="–®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–∞—è")
        
        ttk.Label(hex_frame, text="–ü–µ—Ä–µ–≤–æ–¥ –≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É:").pack(pady=10)
        
        ttk.Label(hex_frame, text="–î–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ:").pack()
        decimal_hex_entry = ttk.Entry(hex_frame)
        decimal_hex_entry.pack(pady=5)
        
        hex_result_label = ttk.Label(hex_frame, text="", background='white',
                                   relief='sunken', padding=5)
        hex_result_label.pack(fill=tk.X, padx=20, pady=10)
        
        def convert_to_hex():
            try:
                decimal = int(decimal_hex_entry.get())
                hex_val = hex(decimal)[2:].upper()
                hex_result_label.config(text=f"–î–µ—Å—è—Ç–∏—á–Ω–æ–µ: {decimal}\n–®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–µ: {hex_val}")
            except ValueError:
                messagebox.showerror("–û—à–∏–±–∫–∞", "–í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ")
        
        ttk.Button(hex_frame, text="–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å", 
                  command=convert_to_hex).pack(pady=5)
    
    def show_converter(self):
        converter_window = tk.Toplevel(self.root)
        converter_window.title("üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –µ–¥–∏–Ω–∏—Ü")
        converter_window.geometry("400x300")
        
        ttk.Label(converter_window, text="–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:").pack(pady=10)
        
        # –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        category_var = tk.StringVar(value="length")
        ttk.Radiobutton(converter_window, text="–î–ª–∏–Ω–∞", 
                       variable=category_var, value="length").pack()
        ttk.Radiobutton(converter_window, text="–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞", 
                       variable=category_var, value="temperature").pack()
        
        ttk.Label(converter_window, text="–ó–Ω–∞—á–µ–Ω–∏–µ:").pack(pady=5)
        value_entry = ttk.Entry(converter_window)
        value_entry.pack(pady=5)
        
        conversion_frame = ttk.Frame(converter_window)
        conversion_frame.pack(pady=10)
        
        ttk.Label(conversion_frame, text="–∏–∑:").grid(row=0, column=0, padx=5)
        from_var = tk.StringVar()
        from_combo = ttk.Combobox(conversion_frame, textvariable=from_var, width=10)
        from_combo.grid(row=0, column=1, padx=5)
        
        ttk.Label(conversion_frame, text="–≤:").grid(row=0, column=2, padx=5)
        to_var = tk.StringVar()
        to_combo = ttk.Combobox(conversion_frame, textvariable=to_var, width=10)
        to_combo.grid(row=0, column=3, padx=5)
        
        def update_units(*args):
            category = category_var.get()
            if category == "length":
                units = ["m", "cm", "mm", "km"]
                from_combo['values'] = units
                to_combo['values'] = units
                from_var.set("m")
                to_var.set("cm")
            elif category == "temperature":
                units = ["C", "F", "K"]
                from_combo['values'] = units
                to_combo['values'] = units
                from_var.set("C")
                to_var.set("F")
        
        category_var.trace('w', update_units)
        update_units()
        
        result_label = ttk.Label(converter_window, text="", background='white',
                               relief='sunken', padding=5)
        result_label.pack(fill=tk.X, padx=20, pady=10)
        
        def convert_units():
            try:
                value = float(value_entry.get())
                from_unit = from_var.get()
                to_unit = to_var.get()
                category = category_var.get()
                
                result = value
                
                if category == "length":
                    # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–ª–∏–Ω—ã
                    conversions = {
                        ("m", "cm"): lambda x: x * 100,
                        ("cm", "m"): lambda x: x / 100,
                        ("m", "mm"): lambda x: x * 1000,
                        ("mm", "m"): lambda x: x / 1000,
                        ("km", "m"): lambda x: x * 1000,
                        ("m", "km"): lambda x: x / 1000,
                    }
                    if (from_unit, to_unit) in conversions:
                        result = conversions[(from_unit, to_unit)](value)
                
                elif category == "temperature":
                    # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
                    if from_unit == "C" and to_unit == "F":
                        result = (value * 9/5) + 32
                    elif from_unit == "F" and to_unit == "C":
                        result = (value - 32) * 5/9
                    elif from_unit == "C" and to_unit == "K":
                        result = value + 273.15
                    elif from_unit == "K" and to_unit == "C":
                        result = value - 273.15
                
                result_label.config(text=f"{value} {from_unit} = {result:.2f} {to_unit}")
                
            except ValueError:
                messagebox.showerror("–û—à–∏–±–∫–∞", "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ")
        
        ttk.Button(converter_window, text="–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å", 
                  command=convert_units).pack(pady=10)
    
    def show_photo_analysis(self):
        messagebox.showinfo("üì∏ –§–æ—Ç–æ-–∞–Ω–∞–ª–∏–∑", 
                           "–§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ç–æ-–∞–Ω–∞–ª–∏–∑–∞ —ç–º—É–ª–∏—Ä—É–µ—Ç—Å—è –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏.\n\n"
                           "–í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç:\n"
                           "‚Ä¢ –ó–∞—Ö–≤–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∫–∞–º–µ—Ä—ã\n"
                           "‚Ä¢ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (OCR)\n"
                           "‚Ä¢ –ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏\n\n"
                           "–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã: –≤–≤–µ–¥–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ –≥–ª–∞–≤–Ω–æ–º –æ–∫–Ω–µ.")
    
    def insert_example(self, example):
        self.entry.delete(0, tk.END)
        self.entry.insert(0, example)
        self.calculate()
    
    def show_result(self, text):
        self.result_text.delete(1.0, tk.END)
        self.result_text.insert(1.0, text)

def main():
    # –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    root = tk.Tk()
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    try:
        from tkinter import font
        default_font = font.nametofont("TkDefaultFont")
        default_font.configure(size=12)
    except:
        pass
    
    app = SmartSolverApp(root)
    root.mainloop()

if __name__ == "__main__":
    main()
